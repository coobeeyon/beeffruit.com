---
const items = [
  { text: "WIN BEEF", color: "bg-brand-red" },
  { text: "LOSE FRUIT", color: "bg-brand-yellow" },
  { text: "CHAOS", color: "bg-brand-pink" },
  { text: "TRY AGAIN", color: "bg-brand-blue" },
  { text: "QUANTUM BEEF", color: "bg-brand-green" },
  { text: "FORBIDDEN FRUIT", color: "bg-purple-600" },
  { text: "???", color: "bg-gray-600" },
  { text: "TRANSCEND", color: "bg-orange-500" }
];
---

<section class="py-12 text-center">
  <h2 class="text-3xl font-black mb-6 rainbow-text">SPIN THE WHEEL OF CHAOS</h2>
  
  <div class="relative inline-block">
    <div id="wheel" class="w-64 h-64 rounded-full relative overflow-hidden border-4 border-white shadow-2xl">
      {items.map((item, i) => (
        <div 
          class={`absolute w-32 h-32 ${item.color} origin-bottom-right`}
          style={`transform: rotate(${i * 45}deg); clip-path: polygon(0 100%, 100% 100%, 100% 0);`}
        >
          <span class="absolute top-4 left-8 text-xs font-bold text-white transform rotate-45">
            {item.text}
          </span>
        </div>
      ))}
    </div>
    
    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-2">
      <div class="text-4xl">ðŸ‘‡</div>
    </div>
  </div>
  
  <button id="spin-btn" class="mt-8 px-8 py-4 rounded-xl bg-gradient-to-r from-brand-pink to-brand-yellow text-white font-black text-xl shake-hover">
    SPIN FOR YOUR FATE
  </button>
  
  <div id="wheel-result" class="mt-6 text-2xl font-bold"></div>
</section>

<style>
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  .spinning {
    animation: spin 2s cubic-bezier(0.17, 0.67, 0.83, 0.67);
  }
</style>

<script>
  const wheel = document.getElementById('wheel');
  const btn = document.getElementById('spin-btn');
  const result = document.getElementById('wheel-result');
  const outcomes = [
    "YOU WIN ABSOLUTELY NOTHING",
    "BEEF IS NOW ILLEGAL FOR YOU",
    "ALL FRUIT TASTES LIKE BEEF NOW",
    "YOU ARE BEEF",
    "CONGRATULATIONS: CHAOS",
    "TRY AGAIN (BUT WORSE)",
    "YOU'VE BEEN SUBSCRIBED TO BEEF FACTS",
    "FRUIT WINS THIS ROUND"
  ];
  
  btn?.addEventListener('click', () => {
    const spins = Math.floor(Math.random() * 5) + 5;
    const degrees = spins * 360 + Math.floor(Math.random() * 360);
    
    if (wheel) {
      wheel.style.transition = 'transform 3s cubic-bezier(0.17, 0.67, 0.83, 0.67)';
      wheel.style.transform = `rotate(${degrees}deg)`;
    }
    
    setTimeout(() => {
      if (result) {
        result.textContent = outcomes[Math.floor(Math.random() * outcomes.length)];
        result.className = 'mt-6 text-2xl font-bold glitch-text';
      }
    }, 3000);
  });
</script>